<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Cuaca Sederhana</title>
    <style>
        
        body { font-family: sans-serif; padding: 20px; }
        .input-group { margin-bottom: 20px; display: flex; gap: 10px; }
        input[type="text"] { padding: 8px; flex-grow: 1; }
        button { padding: 8px 15px; cursor: pointer; }
        h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 20px; }
        p { margin: 5px 0; }
        .data { font-weight: bold; }
    </style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<h2 style="margin-top: 0;">Lokasi</h2>
<div class="input-group">
    <input type="text" id="lokasiInput" value="Yogyakarta" placeholder="Masukkan lokasi (cth: Jakarta, London)">
    <button id="getButton">GET</button>
</div>

<h2>Cuaca: <span id="lokasi">...</span></h2> 
<div id="tampilan"></div>

<div id="detailCuaca">
    <p>Suhu Celcius = <span class="data" id="suhuC">...</span> °C</p>
    <p>Suhu Fahrenheit = <span class="data" id="suhuF">...</span> °F</p>
    <p>Kelembapan = <span class="data" id="kelembapan">...</span> %</p>
</div>

<h2>Lokasi</h2>
<div id="detailLokasi">
    <p>Negara = <span class="data" id="negara">...</span></p>
    <p>Provinsi = <span class="data" id="provinsi">...</span></p>
    <p>Longitude = <span class="data" id="longitude">...</span></p>
    <p>Latitut = <span class="data" id="latitude">...</span></p>
</div>

<script>
   
    function ambilDataCuaca(lokasi) {
     
        const urlapi = `http://api.weatherapi.com/v1/current.json?key=42261d3bc893472196a65635250710&q=${lokasi}&aqi=no`;

        $.ajax({
            url: urlapi,
            method: "GET",
            success: function(data){
                console.log(data);
                
                // DATA CUACA
                let lokasiNama = data.location.name;
                let suhuC = data.current.temp_c;
                let suhuF = data.current.temp_f; // TAMBAHAN
                let kelembapan = data.current.humidity; // TAMBAHAN
                let kondisi = data.current.condition.text;
                let icon = data.current.condition.icon;
                
                // DATA LOKASI
                let negara = data.location.country; // TAMBAHAN
                let provinsi = data.location.region; // TAMBAHAN
                let longitude = data.location.lon; // TAMBAHAN
                let latitude = data.location.lat; // TAMBAHAN
                
                // OUTPUT UTAMA
                document.getElementById("lokasi").innerHTML = lokasiNama;
                document.getElementById("tampilan").innerHTML = `<h3>${suhuC} °C</h3> <p>${kondisi}</p> <img src="${icon}">`;

                // OUTPUT DETAIL CUACA (TAMBAHAN)
                document.getElementById("suhuC").innerHTML = suhuC;
                document.getElementById("suhuF").innerHTML = suhuF;
                document.getElementById("kelembapan").innerHTML = kelembapan;

                // OUTPUT DETAIL LOKASI (TAMBAHAN)
                document.getElementById("negara").innerHTML = negara;
                document.getElementById("provinsi").innerHTML = provinsi;
                document.getElementById("longitude").innerHTML = longitude;
                document.getElementById("latitude").innerHTML = latitude;
            },
            error: function(xhr, status, error){ // Ganti 'fail' menjadi 'error' untuk jQuery AJAX
                console.error("Gagal mengambil data cuaca:", status, error);
                document.getElementById("lokasi").innerHTML = 'Lokasi tidak ditemukan atau gagal mengambil data.';
                document.getElementById("tampilan").innerHTML = '';
            }
        });
    }

    // FUNGSI INI DIJALANKAN SAAT HALAMAN PERTAMA KALI DIMUAT
    ambilDataCuaca(document.getElementById('lokasiInput').value);

    // FUNGSI INI DIJALANKAN SAAT TOMBOL 'GET' DIKLIK
    document.getElementById('getButton').addEventListener('click', function() {
        const lokasiBaru = document.getElementById('lokasiInput').value;
        if (lokasiBaru.trim() !== "") {
            ambilDataCuaca(lokasiBaru);
        } else {
            alert("Mohon masukkan nama lokasi.");
        }
    });

</script>
</body>
</html>
